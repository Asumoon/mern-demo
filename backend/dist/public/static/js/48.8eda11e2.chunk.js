"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[48],{48:(e,r,t)=>{t.r(r),t.d(r,{default:()=>n});var a=t(43),s=t(213),l=t(347),i=t(579);const n=function(){const[e,r]=(0,a.useState)([]),[t,n]=(0,a.useState)(1),[o,d]=(0,a.useState)(!1),[c,g]=(0,a.useState)(null),[x,m]=(0,a.useState)(!1),[b,u]=(0,a.useState)(!1),[h,y]=(0,a.useState)({}),[p,v]=(0,a.useState)(""),[f,j]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{d(!0);try{const e=await s.A.get(`/api/movies?page=${t}`);r((r=>[...r,...e.data.data]))}catch(e){console.error("Error fetching movies:",e)}d(!1)})()}),[t]);const N=()=>{window.innerHeight+window.scrollY>=document.body.offsetHeight-100&&!o&&n((e=>e+1))},w=e=>{c&&g({...c,[e.target.name]:e.target.value})};return(0,a.useEffect)((()=>{(async()=>{d(!0);try{const a=await s.A.get(`/api/movies?page=${t}`);r((e=>[...e,...a.data.data])),console.log("-- xyz movies --\x3e ",e)}catch(a){console.error("Error fetching movies:",a)}d(!1)})()}),[t]),(0,a.useEffect)((()=>(window.addEventListener("scroll",N),()=>window.removeEventListener("scroll",N))),[o]),(0,i.jsxs)("div",{className:"container mx-auto px-4",children:[(0,i.jsx)("div",{className:"flex justify-end mb-4",children:(0,i.jsx)("button",{onClick:()=>{g({title:"",year:0,genre:"",image:""}),u(!1),y({}),m(!0)},className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600",children:"Add New Movie"})}),(0,i.jsxs)("table",{className:"min-w-full bg-zinc-100 border border-gray-200 rounded-lg",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 border-b-2 border-gray-300 text-left text-gray-700 font-semibold tracking-wider",children:"Title"}),(0,i.jsx)("th",{className:"px-6 py-3 border-b-2 border-gray-300 text-left text-gray-700 font-semibold tracking-wider",children:"Year"}),(0,i.jsx)("th",{className:"px-6 py-3 border-b-2 border-gray-300 text-left text-gray-700 font-semibold tracking-wider",children:"Genre"}),(0,i.jsx)("th",{className:"px-6 py-3 border-b-2 border-gray-300 text-left text-gray-700 font-semibold tracking-wider",children:"Image"}),(0,i.jsx)("th",{className:"px-6 py-3 border-b-2 border-gray-300 text-left text-gray-700 font-semibold tracking-wider",children:"Actions"})]})}),(0,i.jsx)("tbody",{children:e.map((e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"px-6 py-4 border-b border-gray-200",children:e.title}),(0,i.jsx)("td",{className:"px-6 py-4 border-b border-gray-200",children:e.year}),(0,i.jsx)("td",{className:"px-6 py-4 border-b border-gray-200",children:e.genre}),(0,i.jsx)("td",{className:"px-6 py-4 border-b border-gray-200",children:(0,i.jsx)("img",{src:e.image,alt:e.title,width:"50"})}),(0,i.jsxs)("td",{className:"px-6 py-4 border-b border-gray-200",children:[(0,i.jsx)("button",{onClick:()=>(e=>{g(e),u(!0),y({}),m(!0)})(e),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-50",children:"Edit"}),(0,i.jsx)("button",{onClick:()=>(async e=>{try{await s.A.delete(`/api/movies/${e}`),r((r=>r.filter((r=>r.title!==e)))),v("Movie deleted successfully!"),j(!0)}catch(t){console.error("Error deleting movie:",t)}})(e.title),className:"ml-2 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-opacity-50",children:"Delete"})]})]},e.title)))})]}),x&&(0,i.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex justify-center items-center z-50",children:(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[(0,i.jsx)("h2",{className:"text-lg font-bold mb-4",children:b?"Edit Movie":"Add New Movie"}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700",children:"Title"}),(0,i.jsx)("input",{type:"text",name:"title",value:(null===c||void 0===c?void 0:c.title)||"",onChange:w,className:"w-full p-2 border border-gray-300 rounded mt-1"}),h.title&&(0,i.jsx)("p",{className:"text-red-500 text-sm",children:h.title})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700",children:"Year"}),(0,i.jsx)("input",{type:"number",name:"year",value:(null===c||void 0===c?void 0:c.year)||"",onChange:w,className:"w-full p-2 border border-gray-300 rounded mt-1"}),h.year&&(0,i.jsx)("p",{className:"text-red-500 text-sm",children:h.year})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700",children:"Genre"}),(0,i.jsx)("input",{type:"text",name:"genre",value:(null===c||void 0===c?void 0:c.genre)||"",onChange:w,className:"w-full p-2 border border-gray-300 rounded mt-1"}),h.genre&&(0,i.jsx)("p",{className:"text-red-500 text-sm",children:h.genre})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-gray-700",children:"Image URL"}),(0,i.jsx)("input",{type:"text",name:"image",value:(null===c||void 0===c?void 0:c.image)||"",onChange:w,className:"w-full p-2 border border-gray-300 rounded mt-1"}),h.image&&(0,i.jsx)("p",{className:"text-red-500 text-sm",children:h.image})]}),(0,i.jsxs)("div",{className:"flex justify-end",children:[(0,i.jsx)("button",{onClick:async()=>{if(c&&(()=>{const e={};return null!==c&&void 0!==c&&c.title||(e.title="Title is required"),null!==c&&void 0!==c&&c.year||(e.year="Year is required"),null!==c&&void 0!==c&&c.genre||(e.genre="Genre is required"),null!==c&&void 0!==c&&c.image||(e.image="Image URL is required"),y(e),0===Object.keys(e).length})())if(b)try{await s.A.put(`/api/movies/${c.title}`,c),r((e=>e.map((e=>e.title===c.title?c:e))))}catch(e){console.error("Error updating movie:",e)}else try{const e=await s.A.post("/api/movies",c);r((r=>[...r,e.data]))}catch(e){console.error("Error adding movie:",e)}m(!1)},className:"bg-blue-500 text-white py-2 px-4 rounded mr-2 hover:bg-blue-600",children:b?"Save Changes":"Add Movie"}),(0,i.jsx)("button",{onClick:()=>m(!1),className:"bg-gray-500 text-white py-2 px-4 rounded hover:bg-gray-600",children:"Cancel"})]})]})}),(0,i.jsx)(l.A,{open:f,autoHideDuration:3e3,onClose:()=>{j(!1)},message:p,anchorOrigin:{vertical:"bottom",horizontal:"center"}})]})}}}]);
//# sourceMappingURL=48.8eda11e2.chunk.js.map